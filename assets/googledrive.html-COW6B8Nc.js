import{_ as l,a as r,b as s}from"./google-ouath-02-BekU0u6J.js";import{_ as t,a as n,b as d,c,d as g,e as m,f as p,g as h,h as u,i as _,j as b,k,l as y,m as f,n as v,o as z,p as A,q as x,r as I}from"./google-08-d-CDCsXzph.js";import{_ as P}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as q,b as w,a as i,e as o,r as D,o as U}from"./app-UgT-i3Vo.js";const L={};function S(O,e){const a=D("Mermaid");return U(),q("div",null,[e[0]||(e[0]=w('<div class="hint-container caution"><p class="hint-container-title">请仔细阅读注意事项</p><p>本接口基于官方开发，请勿用于非个人用途，并遵循网盘的使用规范。</p><p>请规范使用账号，包括但不限于 <strong><code>多人共享使用</code></strong>、<strong><code>图床、软件床</code></strong> 和 <strong><code>视频外链到视频网站播放</code></strong> 等分发服务以及一些没有提到的不规范使用的方式导致账号被封禁的，后果自负。</p></div><h1 id="谷歌云盘" tabindex="-1"><a class="header-anchor" href="#谷歌云盘"><span>谷歌云盘</span></a></h1><p>支持团队盘（根目录ID填写团队盘的目录ID）</p><h2 id="_1-必要条件" tabindex="-1"><a class="header-anchor" href="#_1-必要条件"><span>1.必要条件</span></a></h2><div class="hint-container warning"><p class="hint-container-title">注意事项</p><ol><li>搭建OpenList服务的机器首先要能连接到Google网盘才可以喔~</li><li>必须启动谷歌云盘API服务，启用方式见<a href="#_2-1-%E5%90%AF%E7%94%A8-google-drive-api-%E7%9A%84-api">启用 Google Drive API 的 API</a></li></ol><blockquote><p>参考 <a href="https://developers.google.com/workspace/drive/api/quickstart/js" target="_blank" rel="noopener noreferrer">Google Workspace&gt;Google Drive&gt;指南</a>: <a href="https://developers.google.com/workspace/drive/api/quickstart/js" target="_blank" rel="noopener noreferrer">https://developers.google.com/workspace/drive/api/quickstart/js</a></p></blockquote></div><h2 id="_2-准备接入" tabindex="-1"><a class="header-anchor" href="#_2-准备接入"><span>2.准备接入</span></a></h2><h3 id="_2-1-启用-google-drive-api-的-api" tabindex="-1"><a class="header-anchor" href="#_2-1-启用-google-drive-api-的-api"><span>2.1.启用 Google Drive API 的 API</span></a></h3><ol><li>在<a href="https://developers.google.com/workspace/drive/api/quickstart/js" target="_blank" rel="noopener noreferrer">指南页面</a>中找到<code>启用API</code>按钮，点击进入快捷开启界面，点击下一步以及确认后，即可完成开启。</li><li>也可以访问<a href="https://console.cloud.google.com/apis/library/drive.googleapis.com" target="_blank" rel="noopener noreferrer">谷歌云盘API功能管理界面</a>，在上方找到<code>启用</code>按钮，点击后等待启用完成。</li><li><code>配额和系统限制管理</code>（可选）:切换到<code>配额和系统限制</code>选项卡，根据你的使用情况和需求，设置合适的配额和限制。</li></ol><h3 id="_2-2-创建-oauth-客户端-可选-如果使用openlist-公益服务器-自建服务器-则不用创建" tabindex="-1"><a class="header-anchor" href="#_2-2-创建-oauth-客户端-可选-如果使用openlist-公益服务器-自建服务器-则不用创建"><span>2.2.创建 OAuth 客户端（可选，如果使用OpenList/公益服务器/自建服务器，则不用创建）</span></a></h3><ol><li>在<a href="https://console.cloud.google.com/apis/credentials?hl=zh-cn" target="_blank" rel="noopener noreferrer">凭据界面</a>中，点击<code>创建凭据</code>下拉菜单，选择和点击<code>OAuth 客户端 ID</code></li></ol><p><img src="'+l+'" alt="google-ouath-00" loading="lazy"></p><ol start="2"><li>在弹出的窗口中，选择<code>Web 应用</code>，填写应用名称</li><li>在<code>授权的重定向 URI</code>中，填写 <code>https://api.oplist.org/googleui/callback</code>，如果是自建或者公益服务，请填写对应的域名，如 <code>https://your-domain.com/googleui/callback</code>。</li><li>点击<code>创建</code>按钮，完成 OAuth 客户端的创建。注：请复制和保存<code>客户端 ID</code>和<code>客户端密钥</code>，后续需要使用。</li></ol><p><img src="'+r+'" alt="google-ouath-00" loading="lazy"></p><ol start="5"><li>将自己添加到测试用户中，在左侧找到<code>目标对象</code>菜单，点击进入后，找到<code>测试用户</code>下方的<code>+ Add User</code>按钮，点击后输入你的 Google 账号邮箱地址，点击添加即可。</li></ol><p><img src="'+s+'" alt="google-ouath-02" loading="lazy"></p><ol start="6"><li>测试完毕后可以发布应用，在左侧找到<code>目标对象</code>菜单，点击进入后，找到<code>发布状态</code>下方的<code>发布应用</code>按钮，点击后确认发布即可完成应用发布。</li></ol><p><img src="'+t+'" alt="google-ouath-03" loading="lazy"></p><h3 id="_2-3-获取访问密钥和刷新密钥" tabindex="-1"><a class="header-anchor" href="#_2-3-获取访问密钥和刷新密钥"><span>2.3.获取<code>访问密钥</code>和<code>刷新密钥</code></span></a></h3><ol><li>打开<a href="https://api.oplist.org/" target="_blank" rel="noopener noreferrer">OpenList Google 授权页面</a> <strong>⚠️如果使用公益服务器/自建服务器，请访问公益服务器/自建服务器</strong></li><li>在页面中下拉框中选择<code>GoogleDrive Login</code></li></ol><p><img src="'+n+'" alt="google-00-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+d+'" alt="google-00-d" data-mode="darkmode-only" loading="lazy"></p><ol start="3"><li>如果在上面的步骤中创建了 OAuth 客户端 ID，请在下方输入框中填写刚才创建的<code>客户端 ID</code>和<code>客户端密钥</code></li></ol><p><img src="'+c+'" alt="google-01-01-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+g+'" alt="google-01-01-d" data-mode="darkmode-only" loading="lazy"></p><p>否则勾选☑️使用 OpenList 提供的API。<strong>⚠️如果使用的公益服务器/自建服务器，此时使用的是公益服务器/自建服务器内置的客户端ID和应用机密</strong></p><p><img src="'+m+'" alt="google-01-02-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+p+'" alt="google-01-02-d" data-mode="darkmode-only" loading="lazy"></p><ol start="4"><li>点击<code>获取授权</code>按钮，系统会跳转到 Google 授权页面，登录你的 Google 账号，并授权 OpenList 访问你的 Google Drive。</li></ol><p><img src="'+h+'" alt="google-02" loading="lazy"></p><ol start="5"><li>如果出现<code>此应用未经 Google 验证</code>的提示，请点击<code>高级</code>，然后点击<code>转至oplist.org（不安全）</code>继续。（如果是公益服务器/自建服务器，则此处域名以实际公益服务的域名为准，请仔细甄别）。</li></ol><p><img src="'+u+'" alt="google-03" loading="lazy"></p><ol start="6"><li>请注意授权页面上（下图红色框内）的权限信息，确保<strong>只是</strong>访问你的 <strong>谷歌云端硬盘文件</strong>，如果在公益服务中发现该权限不仅仅是访问<strong>谷歌云端硬盘</strong>，请在<a href="https://github.com/openlistteam/docs/issues" target="_blank" rel="noopener noreferrer">openlistteam/docs/issues</a>提起issues。</li></ol><p><img src="'+_+'" alt="google-04" loading="lazy"></p><ol start="6"><li>授权成功后，系统会返回一个<code>刷新密钥</code>和<code>访问密钥</code>，请复制并保存该令牌，后续的配置中会使用。</li></ol><p><img src="'+b+'" alt="google-05-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+k+'" alt="google-05-d" data-mode="darkmode-only" loading="lazy"></p><h2 id="_3-在alist中添加谷歌云盘" tabindex="-1"><a class="header-anchor" href="#_3-在alist中添加谷歌云盘"><span>3.在alist中添加谷歌云盘</span></a></h2><h3 id="_3-1-配置说明" tabindex="-1"><a class="header-anchor" href="#_3-1-配置说明"><span>3.1.配置说明</span></a></h3><h4 id="_3-1-1-根文件夹-id" tabindex="-1"><a class="header-anchor" href="#_3-1-1-根文件夹-id"><span>3.1.1.<strong>根文件夹 ID</strong></span></a></h4><p>与阿里云盘类似，官网 URL 的最后一个字符串，如：</p><p><img src="'+y+'" alt="google" loading="lazy"></p><h3 id="_3-2-开始添加" tabindex="-1"><a class="header-anchor" href="#_3-2-开始添加"><span>3.2.开始添加</span></a></h3><ol><li>打开 Alist 的管理界面，点击左侧菜单中的<code>存储</code>。</li><li>在存储列表页面，点击右上角的<code>添加存储</code>按钮。</li><li>选择驱动为<code>谷歌云盘（Google Drive）</code>。</li></ol><p><img src="'+f+'" alt="google-06-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+v+'" alt="google-06-d" data-mode="darkmode-only" loading="lazy"></p><ol start="4"><li>输入挂载路径，如：<code>google-drive</code>。</li><li>在<code>根文件夹 ID</code>中填写上面获取的根文件夹 ID，如果使用根目录，请填写<code>root</code>。</li><li>刷新令牌中填写上面获取的刷新令牌（如未获取，请参考<a href="#_2-%E5%87%86%E5%A4%87%E6%8E%A5%E5%85%A5">准备接入</a>）。</li><li>如果你使用的是 <code>OpenList （或者公益服务器/自建服务器）</code>提供的 OAuth 客户端 ID 和密钥，请按照<code>7.1</code>和<code>7.2</code>进行配置<br> 7.1. 在<code>Use online api</code>中勾选，表示使用 OpenList 提供的在线 API。<br> 7.2. Api url address填写为 <code>https://api.oplist.org/googleui/renewapi</code>，如果是<code>公益服务器/自建服务器</code>，请填写对应的服务器地址。</li></ol><p><img src="'+z+'" alt="google-07-d" data-mode="darkmode-only" loading="lazy"><br><img src="'+A+'" alt="google-07-l" data-mode="lightmode-only" loading="lazy"></p><ol start="8"><li>如果你使用的是自己创建的 OAuth 客户端 ID 和密钥，请按照<code>8.1</code>和<code>8.2</code>进行配置<br> 8.1. 在<code>Use online api</code>中不勾选，表示使用自建的 OAuth 客户端 ID 和密钥。<br> 8.2. 在<code>客户端ID</code>中填写你的<code>Oauth 客户端 ID</code>，在<code>客户端密钥</code>中填写你的<code>Oauth 客户端密钥</code></li></ol><p><img src="'+x+'" alt="google-08-l" data-mode="lightmode-only" loading="lazy"><br><img src="'+I+'" alt="google-08-d" data-mode="darkmode-only" loading="lazy"></p><ol start="9"><li>点击<code>添加</code>按钮，完成谷歌云盘的添加。</li></ol><h2 id="_4-关于use-online-api选项的说明" tabindex="-1"><a class="header-anchor" href="#_4-关于use-online-api选项的说明"><span>4.关于<code>Use online api</code>选项的说明</span></a></h2><h3 id="_4-1-自身有密钥的情况下-accesstoken刷新的方式" tabindex="-1"><a class="header-anchor" href="#_4-1-自身有密钥的情况下-accesstoken刷新的方式"><span>4.1.自身有密钥的情况下，AccessToken刷新的方式</span></a></h3>',47)),i(a,{id:"mermaid-272",code:"eJwrTi0sTc1LTnXJTEwvSszlUlAoSCwqyUzOLEjMK1FQ8C9IzcvJLC5BF3fPz0/PSXUpyixLBUrBVOna2SFJWCk865/wZN/spx3bn03b8GT3kuedPdpP21qf7133fFbL03WLnnVsf756vafL00k9T9e3vZy0FGgUkn6gaTCDrRRe7J/ydPY8oDlArS/W7X85fR3MQCTTubgAcTdkrA=="}),e[1]||(e[1]=o("h3",{id:"_4-2-自身没有密钥的情况下-accesstoken刷新的方式",tabindex:"-1"},[o("a",{class:"header-anchor",href:"#_4-2-自身没有密钥的情况下-accesstoken刷新的方式"},[o("span",null,"4.2.自身没有密钥的情况下，AccessToken刷新的方式")])],-1)),i(a,{id:"mermaid-276",code:"eJzT1dXlKsksyUm1Uni6rOnJ3qkvG2a92N/un5eTmZfqGOD5tGP7s2kbHJOTU4uLQ/KzU/Pe75nPBdJUnFpYmpqXnOqSmZhelJjLpaBQkFhUkpmcWZCYV6Kg4F+QCjSiuARDHGYwuoR7fn56TqpLUWZZKlAKpl3Xzg6uw0rhWf+EJ/tmQ5z0ZPeS5509IKUweaBaJEOwqdZ+2tb6fO+657Nanq5b9Kxj+/PV6z1dnk7qebq+7eWkpUCzkPSj2vxi/5Sns+cBDQLqfbFu/8vp62Am4nYMzA/E6gYA2NK9vw=="}),e[2]||(e[2]=o("h2",{id:"_5-默认使用的哪种下载方式",tabindex:"-1"},[o("a",{class:"header-anchor",href:"#_5-默认使用的哪种下载方式"},[o("span",null,"5.默认使用的哪种下载方式？")])],-1)),i(a,{id:"mermaid-280",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57Nank5e9Xx575Md3S/27n02befTPf3v98znAqlPy8kvT85ILCpRCHHiUgCC4pLKnFSFZEOFtMycHCvlpKQ0neKSovzsVCvlNDMzKFu3PDOlJMPKqKBCJzk/J78IKJeWhqQ90QiqPS3N3NTcFG6CsbExqgkmBRUQbaVJ6UWJBRkKmSmphgrRCrFg0WRDMJWalwLlRj+bs+bZnF1Pdi9+PqEt1srKqjg/NzU5J7G42NYW4mVbW1u7RKNooLefdWx/sW7f0yXtULNAqlxS0xTgWmBOtDQDK0gyjIaYGxrkE6urB9T4sqFTTxeXaZnJ2UAtCkp6evopRZllqUXF+sn5ubn5eXoZJbk5yuWpSSmJZbrP1057PnWpEpIeYMgSqQcAEWS3Rg=="})])}const K=P(L,[["render",S]]),W=JSON.parse('{"path":"/zh/guide/drivers/googledrive.html","title":"谷歌云盘","lang":"zh-CN","frontmatter":{"icon":"iconfont icon-state","order":111,"category":["Guide"],"tag":["Storage","Guide","本地代理","官方"],"sticky":true,"star":true},"git":{"createdTime":1662556125000,"updatedTime":1751849683000,"contributors":[{"name":"Noah Hsu","username":"","email":"i@nn.ci","commits":3},{"name":"Chi_Tang","username":"","email":"chitang@duck.com","commits":1},{"name":"mengguyi","username":"mengguyi","email":"73788063+mengguyi@users.noreply.github.com","commits":1,"url":"https://github.com/mengguyi"},{"name":"anwen-anyi","username":"anwen-anyi","email":"56105412+anwen-anyi@users.noreply.github.com","commits":8,"url":"https://github.com/anwen-anyi"},{"name":"Andy Hsu","username":"","email":"i@nn.ci","commits":4},{"name":"Patrick-Ze","username":"Patrick-Ze","email":"19711799+Patrick-Ze@users.noreply.github.com","commits":1,"url":"https://github.com/Patrick-Ze"},{"name":"安稳","username":"","email":"anwen_anyi@foxmail.com","commits":1},{"name":"anwen","username":"anwen","email":"anwen_anyi@foxmail.com","commits":1,"url":"https://github.com/anwen"},{"name":"Hantong Chen","username":"","email":"cxwdyx620@gmail.com","commits":1},{"name":"dezhishen","username":"dezhishen","email":"26274059+dezhishen@users.noreply.github.com","commits":2,"url":"https://github.com/dezhishen"},{"name":"cxw620","username":"cxw620","email":"70561268+cxw620@users.noreply.github.com","commits":1,"url":"https://github.com/cxw620"},{"name":"SenkjM","username":"SenkjM","email":"senkjm@outlook.com","commits":1,"url":"https://github.com/SenkjM"},{"name":"ILoveScratch","username":"ILoveScratch","email":"yaowendao2023@qq.com","commits":1,"url":"https://github.com/ILoveScratch"}]},"readingTime":{"minutes":6.07,"words":1820},"filePathRelative":"zh/guide/drivers/googledrive.md"}');export{K as comp,W as data};
